# r5sr_teleop

オペレーターPC用起動パッケージ

## Node

### remap_joy
joyを実際の複雑なキーバインドにremapする

#### ボタン
| index | ボタン                                | 機能                                 |
| ----- | ------------------------------------- | ------------------------------------ |
| 0     | x                                     | ハンドロール左回転                   |
| 1     | o                                     | ハンド開閉                           |
| 2     | △                                     | ハンド開閉                           |
| 3     | □                                     | ハンドロール右回転                   |
| 4     | L1                                    | ハンドヨー右回転(IK)                 |
| 5     | R1                                    | ハンドヨー左回転(IK)                 |
| 6     | L2                                    | ハンド後方(IK)                       |
| 7     | R2                                    | ハンド前方(IK)                       |
| 8     | SHARE                                 | サブマニピュレータ先端モード(押下中) |
| 9     | OPTIONS                               | サブマニピュレータ根元モード(押下中) |
| 10    | PS                                    |                                      |
| 11    | 左スティック押し込み                  | クローラモード移行                   |
| 12    | 右スティック押し込み                  | マニピュレータモード移行             |
| 13    | x(マニピュレータモードでSHARE押下中)  | サブマニピュレータピッチ下           |
| 14    | o(マニピュレータモードでSHARE押下中)  | サブマニピュレータヨー右             |
| 15    | △(マニピュレータモードでSHARE押下中)  | サブマニピュレータピッチ上           |
| 16    | □(マニピュレータモードでSHARE押下中)  | サブマニピュレータヨー左             |
| 17    | L1(マニピュレータモードでSHARE押下中) | ハンドヨー左                         |
| 18    | R1(マニピュレータモードでSHARE押下中) | ハンドヨー右                         |

#### ジョイスティック
| index | 軸                                             | 機能                         |
| ----- | ---------------------------------------------- | ---------------------------- |
| 0     | 左スティックX                                  |                              |
| 1     | 左スティックY                                  | クローラ前後                 |
| 2     | L2                                             | ハンド後方(IK)               |
| 3     | 右スティックX                                  | クローラ旋回                 |
| 4     | 右スティックY                                  |                              |
| 5     | R2                                             | ハンド前方(IK)               |
| 6     | 十字キーX                                      | マニピュレータ根元ヨー(FK)   |
| 7     | 十字キーY                                      | マニピュレータ根元ピッチ(FK) |
| 8     | 左スティックX(マニピュレータモード)            | ハンドロール(IK)             |
| 9     | 左スティックY(マニピュレータモード)            | ハンドピッチ(IK)             |
| 10    | 右スティックX(マニピュレータモード)            | ハンド左右(IK)               |
| 11    | 右スティックY(マニピュレータモード)            | ハンド上下(IK)               |
| 12    | 十字キーY(マニピュレータモードでOPTIONS押下中) | サブマニピュレータ根元ピッチ |
| 13    | 右スティックY(クローラモードでL1押下中)        | 左前フリッパー               |
| 14    | 右スティックY(クローラモードでR1押下中)        | 右前フリッパー               |
| 15    | 右スティックY(クローラモードでL2押下中)        | 左後フリッパー               |
| 16    | 右スティックY(クローラモードでR2押下中)        | 右後フリッパー               |

#### Subscribed Topics
- **joy([sensor_msgs/Joy](http://docs.ros.org/en/api/sensor_msgs/html/msg/Joy.html))**  コントローラからのjoy信号
- **is_emergency_stopped([std_msgs/Bool](http://docs.ros.org/en/api/std_msgs/html/msg/Bool.html))**  非常停止状態かどうか

#### Published Topics
- **out([sensor_msgs/Joy](http://docs.ros.org/en/api/sensor_msgs/html/msg/Joy.html))**  remapされたJoy
- **teleop_mode([std_msgs/String](http://docs.ros.org/en/api/std_msgs/html/msg/String.html))** 遠隔操作モード

## Launch

### r5sr_teleop.launch.xml
通常の起動launchファイル。使用するすべての機能が含まれる
```bash
ros2 launch r5sr_teleop r5sr_teleop.launch.xml
```